(function(a,b){if(typeof exports==="object"){module.exports=b(require("./marked"))}else{a.RevealMarkdown=b(a.marked);a.RevealMarkdown.initialize()}}(this,function(b){if(typeof b==="undefined"){throw"The reveal.js Markdown plugin requires marked to be loaded"}if(typeof hljs!=="undefined"){b.setOptions({highlight:function(q,p){return hljs.highlightAuto(q,p).value}})}var o="^\n---\n$",d="note:",m="\\.element\\s*?(.+?)$",e="\\.slide:\\s*?(\\S.+?)$";function l(r){var q=r.querySelector("script");var s=(q||r).textContent;var t=s.match(/^\n?(\s*)/)[1].length,p=s.match(/^\n?(\t*)/)[1].length;if(p>0){s=s.replace(new RegExp("\\n?\\t{"+p+"}","g"),"\n")}else{if(t>1){s=s.replace(new RegExp("\\n? {"+t+"}","g"),"\n")}}return s}function a(v){var r=v.attributes;var q=[];for(var t=0,p=r.length;t<p;t++){var s=r[t].name,u=r[t].value;if(/data\-(markdown|separator|vertical|notes)/gi.test(s)){continue}if(u){q.push(s+"="+u)}else{q.push(s)}}return q.join(" ")}function f(p){p=p||{};p.separator=p.separator||o;p.notesSeparator=p.notesSeparator||d;p.attributes=p.attributes||"";return p}function g(q,p){p=f(p);var r=q.split(new RegExp(p.notesSeparator,"mgi"));if(r.length===2){q=r[0]+'<aside class="notes" data-markdown>'+r[1].trim()+"</aside>"}return'<script type="text/template">'+q+"<\/script>"}function i(y,B){B=f(B);var r=new RegExp(B.separator+(B.verticalSeparator?"|"+B.verticalSeparator:""),"mg"),p=new RegExp(B.separator);var u,v=0,z,s=true,x,A=[];while(u=r.exec(y)){notes=null;z=p.test(u[0]);if(!z&&s){A.push([])}x=y.substring(v,u.index);if(z&&s){A.push(x)}else{A[A.length-1].push(x)}v=r.lastIndex;s=z}(s?A:A[A.length-1]).push(y.substring(v));var q="";for(var t=0,w=A.length;t<w;t++){if(A[t] instanceof Array){q+="<section "+B.attributes+">";A[t].forEach(function(C){q+="<section data-markdown>"+g(C,B)+"</section>"});q+="</section>"}else{q+="<section "+B.attributes+" data-markdown>"+g(A[t],B)+"</section>"}}return q}function n(){var v=document.querySelectorAll("[data-markdown]"),t;for(var r=0,p=v.length;r<p;r++){t=v[r];if(t.getAttribute("data-markdown").length){var u=new XMLHttpRequest(),q=t.getAttribute("data-markdown");datacharset=t.getAttribute("data-charset");if(datacharset!=null&&datacharset!=""){u.overrideMimeType("text/html; charset="+datacharset)}u.onreadystatechange=function(){if(u.readyState===4){if(u.status>=200&&u.status<300){t.outerHTML=i(u.responseText,{separator:t.getAttribute("data-separator"),verticalSeparator:t.getAttribute("data-vertical"),notesSeparator:t.getAttribute("data-notes"),attributes:a(t)})}else{t.outerHTML='<section data-state="alert">ERROR: The attempt to fetch '+q+" failed with HTTP status "+u.status+".Check your browser's JavaScript console for more details.<p>Remember that you need to serve the presentation HTML from a HTTP server.</p></section>"}}};u.open("GET",q,false);try{u.send()}catch(s){alert("Failed to get the Markdown file "+q+". Make sure that the presentation and the file are served by a HTTP server and the file can be found there. "+s)}}else{if(t.getAttribute("data-separator")||t.getAttribute("data-vertical")||t.getAttribute("data-notes")){t.outerHTML=i(l(t),{separator:t.getAttribute("data-separator"),verticalSeparator:t.getAttribute("data-vertical"),notesSeparator:t.getAttribute("data-notes"),attributes:a(t)})}else{t.innerHTML=g(l(t))}}}}function k(u,q,v){var t=new RegExp(v,"mg");var p=new RegExp('([^"= ]+?)="([^"=]+?)"',"mg");var r=u.nodeValue;if(matches=t.exec(r)){var s=matches[1];r=r.substring(0,matches.index)+r.substring(t.lastIndex);u.nodeValue=r;while(matchesClass=p.exec(s)){q.setAttribute(matchesClass[1],matchesClass[2])}return true}return false}function h(u,t,r,p,q){if(t!=null&&t.childNodes!=undefined&&t.childNodes.length>0){previousParentElement=t;for(var s=0;s<t.childNodes.length;s++){childElement=t.childNodes[s];if(s>0){j=s-1;while(j>=0){aPreviousChildElement=t.childNodes[j];if(typeof aPreviousChildElement.setAttribute=="function"&&aPreviousChildElement.tagName!="BR"){previousParentElement=aPreviousChildElement;break}j=j-1}}parentSection=u;if(childElement.nodeName=="section"){parentSection=childElement;previousParentElement=childElement}if(typeof childElement.setAttribute=="function"||childElement.nodeType==Node.COMMENT_NODE){h(parentSection,childElement,previousParentElement,p,q)}}}if(t.nodeType==Node.COMMENT_NODE){if(k(t,r,p)==false){k(t,u,q)}}}function c(){var u=document.querySelectorAll("[data-markdown]");for(var s=0,p=u.length;s<p;s++){var t=u[s];if(!t.getAttribute("data-markdown-parsed")){t.setAttribute("data-markdown-parsed",true);var r=t.querySelector("aside.notes");var q=l(t);t.innerHTML=b(q);h(t,t,null,t.getAttribute("data-element-attributes")||t.parentNode.getAttribute("data-element-attributes")||m,t.getAttribute("data-attributes")||t.parentNode.getAttribute("data-attributes")||e);if(r){t.appendChild(r)}}}}return{initialize:function(){n();c()},processSlides:n,convertSlides:c,slidify:i}}));